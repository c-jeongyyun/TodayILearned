## ì˜¤ëŠ˜ ë°°ìš´ ê²ƒ
1. ë¬´í•œìŠ¤í¬ë¡¤â™¾ï¸    
    ### intersection observerì˜ InView ì»´í¬ë„ŒíŠ¸ ì‚¬ìš©  
   - ê³µì‹ readme : https://github.com/thebuilder/react-intersection-observer 
   - InView ì»´í¬ë„ŒíŠ¸ ì‚¬ìš© ì˜ˆì‹œ : https://codesandbox.io/s/inview-render-props-hvhcb?fontsize=14&hidenavigation=1&theme=dark&file=/src/index.tsx 


    ### êµ¬í˜„ë°©ì‹

    actionListì˜ ë§¨ ë§ˆì§€ë§‰ì— inView ì»´í¬ë„ŒíŠ¸ ë°°ì¹˜. 

    InView ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— ë³´ì¼ë•Œ ë§ˆë‹¤ ë°ì´í„° fetching í•¨. 

    ë§ˆì§€ë§‰ ë°ì´í„°ì¸ ê²½ìš°, ë”ì´ìƒ fetchingí•˜ì§€ ì•Šë„ë¡ ì²˜ë¦¬í•¨. 

    (ë§ˆì§€ë§‰ ë°ì´í„° : ë°›ì€ listê°€ 0ê°œì„) 
    
    
    ### ì½”ë“œ 
    ``` tsx
    import {useAsyncEffect} from "@/hooks/useAsyncEffect";
    import React, {memo, useEffect, useState} from "react";
    import {InView} from "react-intersection-observer";
    import LoadingSpinner from "@/components/LoadingSpinner/LoadingSpinner";

    const takeCount = 10;

    const InfinityScrollExample = memo(() => {
        const [myList, setMyList] = useState([]);
        const [inView, setInView] = useState(false);
        const [fetchCnt, setFetchCnt] = useState(-1);
        const [hasLastData, setHasLastData] = useState(false);
        const [isLoading, setIsLoading] = useState(false);

        useAsyncEffect(async () => {
            if (fetchCnt < 0) return;
           setIsLoading(true);
           try {
                // take : í•œë²ˆì— ê°€ì ¸ì˜¤ëŠ” ê°œìˆ˜, skip: ê±´ë„ˆë›´ ê°œìˆ˜ (ex. take:5, skip:23 ì´ë©´,  24ë²ˆì§¸ë¶€í„° 5ê°œ ê°€ì ¸ì˜´)
               const res = await getMyLists({take: takeCount, skip: fetchCnt * takeCount});

               if (res.length === 0) {
                 setHasLastData(true);
                 setIsLoading(false);
                 return;
                }
               setMyList((cur) => [...cur, ...res]);
           } catch (err: any) {
               alert(err.message);
           }
            setIsLoading(false);
       }, [fetchCnt]);

       useEffect(() => {
           if (!inView || hasLastData) return;
           setFetchCnt((cur) => cur + 1);
      }, [inView]);

      return (
         <div>
           <div>
              {myList.map((item) => (
               <div key={item.id}>{item.name}</div>
             ))}
            <InView onChange={setInView}>
               {({inView, ref}) => <div ref={ref}>{isLoading ? <LoadingSpinner /> : null}</div>}
             </InView>
          </div>
          </div>
        );
     });

    export default InfinityScrollExample;

    
    ```
    - ì‹¤ì œì½”ë“œ: https://www.notion.so/cnri/TIL-d0436b3849a2425c9a36cc4230dd4f65



    ### ì£¼ì˜

    useAsyncEffect ë‚´ë¶€ì—ì„œ ë°°ì—´ ê°€ì ¸ì˜´. => ì´ˆê¸° ì‹¤í–‰ë¨ 

    ë§¨ ì²˜ìŒì—ëŠ” ë°°ì—´ì´ ì•„ë¬´ê²ƒë„ ì—†ìœ¼ë¯€ë¡œ inView ì»´í¬ë„ŒíŠ¸ê°€ ë°”ë¡œ ë³´ì´ê²Œ ë¨. ë”°ë¼ì„œ inViewë„ true. 

    => ë”°ë¼ì„œ, ì´ˆê¸° ì‹¤í–‰ + inView trueë¡œ ì¸í•´ apiê°€ ë‘ë²ˆ í˜¸ì¶œë¨.  => ë¹„ë™ê¸°ì´ë¯€ë¡œ ê°ê°ì´ ì‹¤í–‰ë˜ì–´, ë°°ì—´ì— ê°™ì€ ê°’ì´ ë‘ë²ˆ ë“¤ì–´ê° 


   > ğŸ”— ì°¸ê³  ë§í¬ : https://tech.kakaoenterprise.com/149
